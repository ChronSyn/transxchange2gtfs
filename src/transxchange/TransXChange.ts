import {ATCOCode} from "../reference/NaPTAN";

/**
 * Trimmed down version of the JSON generated by the XML parser
 */
export interface TransXChange {
  StopPoints: StopPoint[],
  JourneySections: JourneyPatternSections,
  Operators: Operators
}

/**
 * JourneyPatternSections indexed by id
 */
export type JourneyPatternSections = Record<string, TimingLink[]>;

/**
 * AnnotatedStopPointRef from TransXChange feed
 */
export interface StopPoint {
  StopPointRef: ATCOCode,
  CommonName: string,
  LocalityName: string,
  LocalityQualifier: string
}

/**
 * JourneyPatternTimingLink
 */
export interface TimingLink {
  From: JourneyStop,
  To: JourneyStop,
  RunTime: Duration;
}

/**
 * From/To field inside a JourneyPatternTimingLink
 */
export interface JourneyStop {
  Activity: StopActivity,
  StopPointRef: ATCOCode,
  WaitTime?: Duration
}

/**
 * Types of Activity at a From/To location
 */
export enum StopActivity {
  PickUp = "pickUp",
  PickUpAndSetDown = "pickUpAndSetDown",
  SetDown = "setDown",
}

/**
 * String representation of a duration, e.g. PT5M
 */
export type Duration = string;

/**
 * Operators indexed by ID
 */
export type Operators = Record<string, Operator>;

/**
 * Operator
 */
export interface Operator {
  OperatorCode: string,
  OperatorShortName: string,
  OperatorNameOnLicence: string | undefined
}

